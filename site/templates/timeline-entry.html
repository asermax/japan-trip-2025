{% extends "basic.html" %}

{% block title %}{{ config.title }} • {{ page.title }}{% endblock title %}

{% block extra_head %}
<style>
.back_btn {
  display: none !important;
}
</style>

{% if page.extra.type == "destination" and page.extra.map_data %}
<!-- Map Styles -->
<link rel="stylesheet" href="/css/maps.css">
<!-- Custom Maps JavaScript - Load before Google Maps API -->
<script src="/js/maps.js"></script>
<!-- Google Maps API -->
<script src="https://maps.googleapis.com/maps/api/js?key={{ config.extra.google_maps_api_key }}&callback=initMap&libraries=&v=weekly" async defer></script>
{% endif %}
{% endblock extra_head %}

{% block content %}
<article class="post animated fadeInDown">
  <div class="post-title">
    <h1>{{ page.title }}</h1>
    {% if page.extra.type %}
    <div class="timeline-type timeline-type-{{ page.extra.type }}">
      {% if page.extra.type == "destination" %}🌸 Destination
      {% elif page.extra.type == "journey" %}⛩️ Journey
      {% endif %}
    </div>
    {% endif %}
  </div>

  <div class="post-content">
    {% if page.extra.date_range or page.extra.duration %}
    <div class="meta">
      {% if page.extra.date_range %}
      <div><strong>📅 Date:</strong> {{ page.extra.date_range }}</div>
      {% endif %}
      {% if page.extra.duration %}
      <div><strong>⏱️ Duration:</strong> {{ page.extra.duration }}</div>
      {% endif %}
    </div>
    {% endif %}

    {{ page.content | safe }}

    {% if page.extra.type == "destination" and page.extra.map_data %}
    <div class="map-section">
      <h2>📍 Attraction Map</h2>
      <div id="destination-map" class="map-container" data-map-markers="{{ page.extra.map_data }}"></div>
      <p class="map-help">Click on any pin to visit the attraction's detail page</p>
    </div>
    {% endif %}
  </div>

  <div class="post-footer">
    {% if page.taxonomies.tags %}
    <div class="tags">
      <ul>
        {% for tag in page.taxonomies.tags %}
        <li><a href="/tags/{{ tag | slugify }}/">#{{ tag }}</a></li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}
  </div>

  {% if page.extra.previous_entry or page.extra.next_entry %}
  <div class="pagination">
    <ul>
      {% if page.extra.previous_entry %}
      <li class="pre">
        <a href="/{{ page.extra.previous_entry }}/">
          ← {% if page.extra.previous_title %}{{ page.extra.previous_title }}{% else %}Previous{% endif %}
        </a>
      </li>
      {% endif %}

      {% if page.extra.next_entry %}
      <li class="next">
        <a href="/{{ page.extra.next_entry }}/">
          {% if page.extra.next_title %}{{ page.extra.next_title }}{% else %}Next{% endif %} →
        </a>
      </li>
      {% endif %}
    </ul>
  </div>
  {% endif %}

</article>

{% endblock content %}